<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Demo</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width"/>
    <base href="/"/>
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css"/>
    <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
<h1>Demo</h1>
<div>
    <button id="rank" class="btn btn-primary">Logout</button>
</div>
<div>
    <button id="test" class="btn btn-primary">Logout</button>
</div>
<div class="container authenticated">
    Logged in as: <span id="rankCounted"></span>
</div>
<div class="container authenticated">
    Logged in as: <span id="result"></span>
</div>

<!--<form>-->
    <!--<input type="radio" name="foo" value="1" checked="checked" />-->
    <!--<input type="radio" name="foo" value="0" />-->
    <!--<input name="bar" value="xxx" />-->
    <!--<select name="this">-->
        <!--<option value="hi" selected="selected">Hi</option>-->
        <!--<option value="ho">Ho</option>-->
    <!--</select>-->
<!--</form>-->
<!--<form>-->
    <!--<input type="radio" name="foo" value="1" checked="checked" />-->
    <!--<input type="radio" name="foo" value="0" />-->
    <!--<input name="bar" value="яяя" />-->
    <!--<select name="this">-->
        <!--<option value="hi" selected="selected">Hi</option>-->
        <!--<option value="ho">Ho</option>-->
    <!--</select>-->
<!--</form>-->

//-----Testing
<div class="container">
    <div class="row">
        <div class="control-group" id="fields">
            <label class="control-label" for="field1">Nice Multiple Form Fields</label>
            <div class="controls">
                <form role="form" autocomplete="off">
                    <div class="entry input-group col-xs-3">
                        <input class="form-control" name="fields[]" type="text" placeholder="Type something" />
                        <span class="input-group-btn">
                            <button class="btn btn-success btn-add" type="button">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </span>
                    </div>
                </form>
                <br>
                <small>Press <span class="glyphicon glyphicon-plus gs"></span> to add another form field :)</small>
            </div>
        </div>
    </div>
</div>


</body>
<script>
    $(document).ready(function(){
        $("#rank").click(function(){
            $.ajax({
                contentType: 'application/json ; charset=utf-8',
                data: JSON.stringify({"alternatives":[{"serialNumber":1,"name":"alternative1","scores":[12.0,3.0,4.0]},{"serialNumber":2,"name":"alternative2","scores":[9.0,2.0,0.0]},{"serialNumber":3,"name":"alternative3","scores":[6.0,8.0,7.0]},{"serialNumber":4,"name":"alternative4","scores":[6.0,6.0,4.0]}],"conditions":["c1","c2","c3","c4"],"criteriaType":1}),

                dataType: 'json',
                success: function(data){
                   // $("#rankCounted").html(data.getRank());
                    $("#rankCounted").html(data.criteriaType);
                },
                error: function(){
                    app.log("Device control failed");
                },
                processData: false,
                type: 'POST',
                url: '/rank'
            });
        });

        $("#test").click(function(){

            alert("Message: "+JSON.stringify(convert($('form'))));
            // jQuery.each($('form'), function(){
            //     alert("Message: "+JSON.stringify(convert(this)));
            // });
        });
        function convert(form){

            var array = jQuery(form).serializeArray();
            var json = {};
            jQuery.each(array, function(){
                json[this.name] = this.value || '';
            });
            alert("Json: "+  JSON.stringify((form).serializeArray()));
            alert("Json: "+  JSON.stringify(json));
            return json;
        }


        $(function()
        {
            $(document).on('click', '.btn-add', function(e)
            {
                e.preventDefault();

                var controlForm = $('.controls form:first'),
                    currentEntry = $(this).parents('.entry:first'),
                    newEntry = $(currentEntry.clone()).appendTo(controlForm);

                newEntry.find('input').val('');
                controlForm.find('.entry:not(:last) .btn-add')
                    .removeClass('btn-add').addClass('btn-remove')
                    .removeClass('btn-success').addClass('btn-danger')
                    .html('<span class="glyphicon glyphicon-minus"></span>');
            }).on('click', '.btn-remove', function(e)
            {
                $(this).parents('.entry:first').remove();

                e.preventDefault();
                return false;
            });
        });


    });


    </script>
</html>